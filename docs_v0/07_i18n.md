# 07 — I18n (FR / EN)

## Principe

I18n “maison” : un dictionnaire `MESSAGES` + une fonction `t(locale, key, vars)`.

- Dictionnaire : `lib/i18n/messages.ts`
- Fonction : `lib/i18n/core.ts`
- Locale côté serveur : `lib/i18n/server.ts`
- Cookie : `cfa_locale`
- API : `POST /app/api/locale` pour mettre à jour le cookie

## Comment ça marche

1. Le locale par défaut est `fr` (`DEFAULT_LOCALE`).
2. Sur le serveur, `getLocale()` lit le cookie `cfa_locale`.
3. Sur le client, un provider expose `t()` à l'UI.

## Keys & organisation

Les keys suivent un style “dot path” :
- `dashboard.title`
- `pvp.duelCompleted`
- `common.save`

## Interpolation

`{var}` est remplacé via `vars`.

Ex :
- `t(locale, "dashboard.games", { n: 3 })` → "3 parties"

## Ajouter une traduction

1. Ajouter la clé dans `lib/i18n/messages.ts` (FR + EN)
2. Utiliser `t(locale, "...")` dans l'UI
3. Éviter d'ajouter des textes inline non traduits (hors prototypes)

## Bonnes pratiques

- Une clé = une intention (pas des textes ultra-contextuels difficiles à réutiliser)
- Eviter les clés très longues
- Garder les blocs par feature (`pvp`, `dashboard`, `library`, etc.)
